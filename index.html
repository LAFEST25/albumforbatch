<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Golden Archive | Class of '25</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <style>
        /* --- 1. LUXURY VARIABLES --- */
        :root {
            --bg-deep: #020202;
            --bg-panel: #0a0a0a;
            
            /* The "True Gold" Gradient Texture */
            --gold-gradient: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            --gold-text: transparent; /* Used with background-clip */
            
            /* Fallback solid gold */
            --gold-solid: #c5a059;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-deep);
            color: #f0f0f0;
            font-family: 'Playfair Display', serif;
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
        }

        /* Utility: Metallic Text Effect */
        .text-gold {
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0px 2px 10px rgba(0,0,0,0.5);
        }

        /* --- 2. MAIN LANDING GRID --- */
        .main-gallery {
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            grid-template-rows: repeat(3, 1fr);
            height: 100vh;
            width: 100%;
            gap: 1px; /* Very thin premium lines */
            background: #333; /* Darker gap color for contrast */
            padding: 0;
            transition: transform 0.8s cubic-bezier(0.2, 1, 0.3, 1), opacity 0.5s ease;
        }

        .main-gallery.inactive {
            transform: scale(0.9);
            opacity: 0;
            pointer-events: none;
            filter: blur(10px); /* Luxury blur out */
        }

        .tile {
            position: relative;
            background: #000;
            cursor: pointer;
            overflow: hidden;
            /* Gold border only appears on hover */
            border: 0px solid transparent; 
            transition: all 0.5s ease;
        }

        .tile img {
            width: 100%; height: 100%; object-fit: cover;
            filter: grayscale(100%) contrast(1.2) brightness(0.8);
            transition: filter 0.8s ease, transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Hover: Restore color, slow zoom, gold shimmer */
        .tile:hover { 
            z-index: 10; 
            box-shadow: 0 0 30px rgba(191, 149, 63, 0.3);
        }
        .tile:hover img { 
            filter: grayscale(0%) contrast(1.1) brightness(1); 
            transform: scale(1.1); 
        }

        /* --- CAPTIONS --- */
        .caption {
            position: absolute; bottom: 0; left: 0; width: 100%;
            padding: 30px;
            background: linear-gradient(to top, rgba(0,0,0,1), transparent);
            opacity: 0; transform: translateY(20px);
            transition: all 0.5s ease 0.1s;
        }
        .tile:hover .caption { opacity: 1; transform: translateY(0); }
        
        .caption h2 {
            font-family: 'Cinzel', serif; font-weight: 800;
            font-size: 1.8rem; letter-spacing: 2px;
            background: var(--gold-gradient);
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .caption p { color: #aaa; font-size: 0.9rem; margin-top: 5px; font-style: italic; letter-spacing: 1px;}

        /* Grid Assignments */
        .tile-1 { grid-column: span 2; grid-row: span 2; }
        .tile-4 { grid-column: span 2; grid-row: span 1; }
        .tile-5 { grid-column: span 1; grid-row: span 2; }

        /* --- 3. EVENT OVERLAY (THE SCROLLABLE MAGAZINE) --- */
        .event-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-deep);
            z-index: 100;
            overflow-y: auto; /* Allow scrolling here */
            opacity: 0; pointer-events: none;
            /* Slide up animation */
            transform: translateY(100%); 
            transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s ease;
        }

        .event-overlay.active {
            opacity: 1; pointer-events: auto;
            transform: translateY(0);
        }

        /* The Close Button - Fixed at top right */
        .close-btn {
            position: fixed; top: 30px; right: 30px;
            background: none; border: 1px solid #bf953f;
            color: #bf953f;
            padding: 10px 25px; cursor: pointer;
            font-family: 'Cinzel', serif; text-transform: uppercase; letter-spacing: 2px;
            z-index: 200; mix-blend-mode: difference;
            transition: 0.4s;
        }
        .close-btn:hover { background: var(--gold-gradient); color: #000; border-color: transparent; }

        /* HERO HEADER (The "Cover Page") */
        .event-hero {
            height: 70vh; /* Takes up 70% of screen initially */
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center;
            padding: 0 20px;
            border-bottom: 1px solid rgba(191, 149, 63, 0.2);
            margin-bottom: 40px;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
        }

        .event-title-large {
            font-family: 'Cinzel', serif; font-size: 4rem;
            text-transform: uppercase; letter-spacing: 5px;
            background: var(--gold-gradient);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            margin-bottom: 20px;
            opacity: 0; animation: fadeUp 1s ease forwards 0.5s;
        }

        .scroll-hint {
            color: #666; font-size: 0.8rem; letter-spacing: 3px; text-transform: uppercase;
            margin-top: 50px; opacity: 0; animation: fadeUp 1s ease forwards 1s;
        }

        /* THE COLLAGE GRID */
        .collage-container {
            max-width: 1600px; margin: 0 auto; padding: 0 20px 100px 20px;
        }

        .collage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            grid-auto-rows: 300px;
            grid-auto-flow: dense;
            gap: 20px;
        }

        .collage-item {
            position: relative; overflow: hidden;
            cursor: zoom-in;
            opacity: 0; transform: translateY(50px); /* Start hidden/lower */
            transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.2, 1, 0.3, 1);
        }
        
        /* This class is removed by JS when scrolled into view */
        .reveal-visible { opacity: 1; transform: translateY(0); }

        .collage-item img {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 0.6s ease;
            filter: grayscale(30%);
        }
        .collage-item:hover img { transform: scale(1.03); filter: grayscale(0%); }

        /* Random Sizes */
        .wide { grid-column: span 2; }
        .tall { grid-row: span 2; }
        .big  { grid-column: span 2; grid-row: span 2; }

        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        /* --- 4. LIGHTBOX --- */
        .lightbox {
            position: fixed; inset: 0; background: rgba(0,0,0,0.98);
            display: flex; justify-content: center; align-items: center;
            z-index: 300; opacity: 0; pointer-events: none; transition: 0.4s;
        }
        .lightbox.active { opacity: 1; pointer-events: auto; }
        .lightbox img {
            max-width: 90%; max-height: 90vh;
            border: 1px solid #bf953f;
            box-shadow: 0 0 50px rgba(191, 149, 63, 0.2);
        }

        /* Mobile */
        @media (max-width: 768px) {
            .main-gallery { display: flex; flex-direction: column; overflow-y: auto; height: auto; }
            .tile { height: 350px; }
            .event-title-large { font-size: 2.5rem; }
            .event-hero { height: 50vh; }
            .collage-item { grid-column: auto !important; grid-row: auto !important; height: 300px; }
        }
    </style>
</head>
<body>

    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <img src="" id="lightbox-img">
    </div>

    <div class="event-overlay" id="eventOverlay">
        <button class="close-btn" onclick="closeEvent()">Back to Album</button>
        
        <div class="event-hero">
            <h1 class="event-title-large" id="overlayTitle">Event Name</h1>
            <p class="scroll-hint">Scroll to Reveal Memories</p>
        </div>

        <div class="collage-container">
            <div class="collage-grid" id="collageGrid">
                </div>
        </div>
    </div>

    <div class="main-gallery" id="mainGallery">
        
        <div class="tile tile-1" onclick="openEvent('La Fest', 15)">
            <img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1200&auto=format&fit=crop" alt="La Fest">
            <div class="caption">
                <h2>La Fest</h2> <p>Elegance in Motion.</p>
            </div>
        </div>

        <div class="tile tile-2" onclick="openEvent('Onam', 9)">
            <img src="https://images.unsplash.com/photo-1601128522306-4447743d56d3?q=80&w=800&auto=format&fit=crop" alt="Onam">
            <div class="caption">
                <h2>Onam</h2> <p>The Golden Tradition.</p>
            </div>
        </div>

        <div class="tile tile-3" onclick="openEvent('Christmas Ball', 12)">
            <img src="https://images.unsplash.com/photo-1513297887119-d46091b24bfa?q=80&w=800&auto=format&fit=crop" alt="Christmas">
            <div class="caption">
                <h2>Christmas</h2> <p>A Winter's Tale.</p>
            </div>
        </div>

        <div class="tile tile-4" onclick="alert('Coming Soon.')">
            <img src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=1200&auto=format&fit=crop" alt="Farewell">
            <div style="position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); border:1px solid #bf953f; padding:10px 20px; color:#bf953f; font-family:'Cinzel'; letter-spacing:2px; pointer-events:none;">LOCKED</div>
            <div class="caption">
                <h2>The Farewell</h2> <p>The Final Bow.</p>
            </div>
        </div>

        <div class="tile tile-5" onclick="openEvent('Last Class', 7)">
            <img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?q=80&w=600&auto=format&fit=crop" alt="Last Day">
            <div class="caption">
                <h2>Last Class</h2> <p>Silence Speaks.</p>
            </div>
        </div>

        <div class="tile tile-6" onclick="openEvent('Teachers Day', 10)">
            <img src="https://images.unsplash.com/photo-1596796930064-2872323cc249?q=80&w=800&auto=format&fit=crop" alt="Teachers Day">
            <div class="caption">
                <h2>Teachers' Day</h2> <p>In Gratitude.</p>
            </div>
        </div>

    </div>

    <script>
        // --- CONFIG & DATA ---
        const themes = {
            'La Fest': 'concert,luxury,lights,crowd',
            'Onam': 'india,flower,saree,gold',
            'Christmas Ball': 'christmas,party,night,sparkler',
            'Last Class': 'classroom,school,students,friends',
            'Teachers Day': 'flower,book,smile,school'
        };

        const eventOverlay = document.getElementById('eventOverlay');
        const mainGallery = document.getElementById('mainGallery');
        const collageGrid = document.getElementById('collageGrid');
        const overlayTitle = document.getElementById('overlayTitle');

        // --- INTERSECTION OBSERVER (THE SCROLL REVEAL MAGIC) ---
        // This watches elements. When they enter the screen, it adds the 'reveal-visible' class.
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('reveal-visible');
                    observer.unobserve(entry.target); // Stop watching once revealed
                }
            });
        }, { threshold: 0.1 });

        // --- OPEN EVENT LOGIC ---
        function openEvent(name, count) {
            overlayTitle.innerText = name;
            collageGrid.innerHTML = ''; // Clear old

            const keywords = themes[name] || 'party';

            // Generate Images
            for(let i=0; i<count; i++) {
                const div = document.createElement('div');
                div.className = 'collage-item';
                
                // Random Layout
                const r = Math.random();
                if(r > 0.85) div.classList.add('big');
                else if(r > 0.6) div.classList.add('wide');
                else if(r > 0.4) div.classList.add('tall');

                // Create Image
                const img = document.createElement('img');
                img.src = `https://source.unsplash.com/random/600x600/?${keywords}&sig=${i}`;
                // Fallback for demo stability
                img.src = `https://images.unsplash.com/photo-${getMockId(i)}?auto=format&fit=crop&w=800&q=80`;
                
                div.onclick = () => openLightbox(img.src);
                div.appendChild(img);
                
                collageGrid.appendChild(div);
                
                // Attach Observer (Initially hidden, revealed on scroll)
                observer.observe(div);
            }

            // Animate Page Transition
            mainGallery.classList.add('inactive');
            eventOverlay.classList.add('active');
        }

        function closeEvent() {
            eventOverlay.classList.remove('active');
            mainGallery.classList.remove('inactive');
            // Reset scroll position after animation finishes
            setTimeout(() => { eventOverlay.scrollTop = 0; }, 800);
        }

        // --- LIGHTBOX LOGIC ---
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        function openLightbox(src) {
            lightboxImg.src = src.replace('w=800', 'w=1600');
            lightbox.classList.add('active');
        }
        function closeLightbox() {
            lightbox.classList.remove('active');
        }

        // Mock IDs for demo
        function getMockId(i) {
            const ids = ['1492684223066-81342ee5ff30', '1601128522306-4447743d56d3', '1513297887119-d46091b24bfa', '1580582932707-520aed937b7b', '1511632765486-a01980978fc2', '1470225620780-dba8ba36b745'];
            return ids[i % ids.length];
        }
    </script>
</body>
</html>
